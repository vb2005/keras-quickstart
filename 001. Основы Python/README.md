# Работа №1
### Основы работы с языком Python

В данной работе рассматриваются базовые конструкции языка программирования Python, которые будут полезны при работе с моделями машинного обучения. Внимательно рассмотрите и выполните все конструкции и кейсы.

### Сведения о работе

Необходимые библиотеки: `не требуются`

Количество заданий для самостоятельного выполнения: ![](https://img.shields.io/badge/9%20заданий-red)

Время на выполнение: ![](https://img.shields.io/badge/90-минут-blue)


# Python
Высокоуровневый язык программирования общего назначения с динамической строгой типизацией и автоматическим управлением памятью, ориентированный на повышение производительности разработчика, читаемости кода и его качества, а также на обеспечение переносимости написанных на нём программ.

## Установка
Для того, чтобы приступить к разработке потребуется интерпретатор языка: https://www.python.org/downloads/

А также любая среда разработки. Чаще всего код пишется в **PyCharm**, **Visual Studio Code**, Jupyter Notebook, Spyder и Notepad++.

Файл с исходным кодом имеет расширение **.py**, и является также исполняемым. Для его запуска требуется ввести команду:
`python.exe demo.py`

## Внимание

Все работы данного курса предлагается (но вовсе не обязательно) выполнять в Google Colab. Это виртуальная среда выполнения, и уже написаны примеры работы с языком программирования. Со всеми ими я советую ознакомится.

А еще Вы можете встретить значок ![](https://img.shields.io/badge/Задача-red) Он говорит о том, что в конце данного блока для Вас будет задание на самостоятельную работу. Их естественно все надо выполнить для получения зачёта по лабораторной работе. Исходный код из блока продублируйте в отчёт по лабораторной работе

## Основы языка




``` python
# Комментарий. Тут они начинаются с символа #

# Первая переменная. Кавычки можно использовать любые. Тип не указывается. Язык не строго типизированный. Регистр имеет значение!
s = 'hello world!'
s = "hello world!"

# Вывести значение можно при помощи метода print.
print('hello world!')
# Если значений несколько, то можно через ,
print(s, ':)', 123)

# А можно, просто указав имя переменной. Последнее, кстати, может работать не всегда :)
s
```

``` python
# Если нужно значение прочитать с консоли, используй input:
a = input("Введите a:")
print(a)
```

## Типы данных

*Предлагаю кратко с ними ознакомится. В целом, они идентичны C++*

**boolean** - логическое значение True или False

**int** - представляет целое число, например, 1, 4, 8, 50.

**float** - представляет число с плавающей точкой, например, 1.2 или 34.76

**complex** - комплексные числа

**str** - строки, в кодировке Unicode

**bytes** - последовательность чисел в диапазоне 0-255

**byte array** - массив байтов, аналогичен bytes с тем отличием, что может изменяться

**list** - список

**tuple** - кортеж

**set** - неупорядоченная коллекция уникальных объектов

**frozen set** - то же самое, что и set, только не может изменяться (immutable)

**dict** - словарь, где каждый элемент имеет ключ и значение

``` python
# Простые типы
b = True
i = 1
f = 12.4
c = 2+3j
s = 'Alex'

# Составные типы
B = bytes([50, 100, 76, 72, 41])  # byte array
L = [b, i, f, c, s, B]            # list
T = (b, i, f, i)                  # tuple
S = {b, i, f, i}                  # set
D = {'id':123, 'pass':234}        # dict
```

``` python
# Для получения типа переменной используем функцию type
print(type(b))
```

``` python
# Получение элемента из списков:
print(B[0])
print(L[0])
print(T[0])

# А вот так уже нельзя. Элементы множества не имеют индексов
print(S[0])

# Со словарём всё идентично C++:
print(D['id'])
```

``` python
print(S)
```
![](https://img.shields.io/badge/Задача%201-red)
``` python
# Задание 1. Выведите содержимое B, L, T, S, D. Объясните, почему в S только 2 элемента
```

## Математические операции

Помимо классических + - * / % язык Python предлагает операции:

Оператор // - целочисленное деление

Оператор ** - возведение в степень

Также есть составные операторы += -= %= и так далее...

А вот ++ и -- тут нет


``` python
print("Обычное деление", 12/5)
print("Целочисленное", 12//5)

# Имеется и преобразование типов:
d = float('123.5')
i = int('123')

print(d, i)
```

``` python
# Имеется и представление в различных системах счисления:
x = 0b101   # 5
y = 0x0a    # 10
z = x + y   # 15

# И форматированный вывод
print("{0} in binary {0:08b}   in hex {0:02x} in octal {0:02o}".format(z))
```

``` python
# А ещё, Python 'помнит' все переменные в рамках текущей сессии
print('Переменная из первого блока кода:', b)
```

![](https://img.shields.io/badge/Задача%202-red)
``` python
# Задание №2. Вычислить D, по формуле: D = b²-4*a*c
```

## Условный оператор
Ряд операций представляют условные выражения. Все эти операции принимают два операнда и возвращают логическое значение, которое в Python представляет тип boolean. Существует только два логических значения - True (выражение истинно) и False (выражение ложно).

``` python
a = 1
if (a == 1):
  print('Условие выполняется')
else:
  print('И не выполняется')
```


Обратили внимание на то, что нет фигурных скобок? Так вот в Python вместо них используется... табуляция!

Содержимое блока кода отделяется двумя пробелами в сравнении с родительской областью кода


``` python
# Вот эта ошибка будет Вашим частым спутником в первые несколько недель
if (a == 1):
print('Условие выполняется')
```


Сравнивать можно и переменные разных типов между собой (если в этом есть смысл:)

А также массивы между собой. Сравнение будет выполнятся поэлементно


``` python
if ('123'==123):
  print('???')
else:
  print('Сначала будут сравниваться типы, а уже потом значения')

if (123.0==123):
  print('Но, где это возможно, они будут приведены неявно')
else:
  print('...')

a = [1, 2, 4, 3]
b = [1, 2, 4, 3]

if (a==b):
  print('Массивы тоже можно сравнивать')

# Работа с логическими константами
if (True and not False or True):
  print('???')
```

Синтаксис else if в Python более лаконичный, чем в с++:

``` python
age = 18
if age >= 21:
    print("Доступ разрешен")
elif age >= 18:
    print("Доступ частично разрешен")
else:
    print("Доступ запрещен")
```

![](https://img.shields.io/badge/Задача%203-red)
``` python
# Задание №3. в зависимости от значения D вывести:
# Корней нет, если D<0
# x = -b/2a, если D=0
# x1 = (-b+D)/2a x2 = (-b-D)/2a, если D>0
```

## Организация циклов
В Python есть 2 вида циклов: **while** и **for**.

Познакомимся с ними поближе, на примерах


``` python
number = 15
i = 1
factorial = 1
while i <= number:
    factorial *= i
    i += 1
print("Факториал числа", number, "равен", factorial)
```

С циклом **for** все интереснее. Он работает как **foreach**, перебирая все значения. Поэтому для того, чтобы организовать цикл от 0 до 5, необходимо сначала создать массив элементов [0, 1, 2, 3, 4, 5]. Сделать это можно при помощи функции **range**, которая имеет 3 варианта перегрузок:
``` python
# От 0 до n-1 с шагом 1
for i in range(10):
  print(i)
```

``` python
# От n до m-1 с шагом 1
for i in range(5,10):
  print(i)
```

``` python
# От n до m-1 с шагом h
for i in range(2,10,4):
  print(i)
```

``` python
# По всем элементам массива:
arr = ['Никита', 'Андрей', 'Максим', 'Иван', 'Илья']
for i in arr:
  print('У нас работает:', i)
```

``` python
# Также в циклах можно использовать continue и break:
for i in arr:
  if (i != 'Андрей'):
    continue
  print('Когда ты даришь мне роз букет \nЯ говорю: Привет,', i)
  break
```

## Строки
Строка представляет последовательность символов в кодировке Unicode. И мы можем обратиться к отдельным символам строки по индексу в квадратных скобках:


``` python
data = "Some text"
print(data[0])
```

Функция ord позволяет получить код символа, а функция len - Длину строки:
``` python
print(ord("A"))
print(len(data))
```

А вот так можно проверить вхождение подстроки в строку:

``` python
exist = "text" in data
print(exist)    # True
```

**Ряд полезных функций для работы со строками:**

**isalpha**(): возвращает True, если строка состоит только из алфавитных символов

**islower**(): возвращает True, если строка состоит только из символов в нижнем регистре

**isupper**(): возвращает True, если все символы строки в верхнем регистре

**isdigit**(): возвращает True, если все символы строки - цифры

**isnumeric**(): возвращает True, если строка представляет собой число
``` python
data = '123'
print(data.isnumeric())
```

**И еще кое-что :)**


**strip**(): удаляет начальные и конечные пробелы из строки

**ljust**(width): если длина строки меньше параметра width, то справа от строки добавляются пробелы, чтобы дополнить значение width, а сама строка выравнивается по левому краю

**rjust**(width): если длина строки меньше параметра width, то слева от строки добавляются пробелы, чтобы дополнить значение width, а сама строка выравнивается по правому краю

**center**(width): если длина строки меньше параметра width, то слева и справа от строки равномерно добавляются пробелы, чтобы дополнить значение width, а сама строка выравнивается по центру

**find**(str[, start [, end]): возвращает индекс подстроки в строке. Если подстрока не найдена, возвращается число -1

**replace**(old, new[, num]): заменяет в строке одну подстроку на другую

**split**([delimeter[, num]]): разбивает строку на подстроки в зависимости от разделителя

**join**(strs): объединяет строки в одну строку, вставляя между ними определенный разделитель

``` python
for i in arr:
  print(i.rjust(29))

s = "Привет, мир"
print('Обнаружена запятая на позиции:', s.find(','))

s_arr = s.split(' ')
print('Второе слово из переменной s:',s_arr[1])

delimiter = ', '
names = 'У нас работают: ' + delimiter.join(arr)
print(names)
```

![](https://img.shields.io/badge/Задача%204-red)
``` python
# Задание №4. Используя строки, циклы и словарь посчитайте сколько раз встречается каждая из букв
# в палиндроме: "А роза упала на лапу Азора"
st = "А роза упала на лапу Азора"

s_dict = dict()

for s in st:
  if s in s_dict:
    s_dict[s] = s_dict[s] + 1
  else:
    s_dict[s] = 1

print(s_dict)
```

## Встроенные функции
Их много, и они достаточно разнообразны. рассмотрим основные из них:
### Преобразование типов
**str(obj), bool(obj), int(obj), float(obj)** - преобразование к строке, логическому, целому, дробному типу

**list(arr), tuple(arr), dict(arr), set(arr)** - преобразование массива к списку, кортежу, словарю, множеству

``` python
lst = [10,20,30]
tp = tuple(lst)
print(tp)
```

### Математика и не только
**abs(val)** - модуль числа(массива чисел)

**pow(val1, val2)** - возведение в степень

**min(arr), max(arr)** - минимальный и максимальный элемент массива

**round(val, N)** - округление числа до N знаков

**id(obj)** - уникальный (в рамках сессии) идентификатор объекта

**hash(obj)** - хэш-функция переменной

``` python
a = 'word'
print('id:',id(a))
print('hash:',hash(a))
```

### All и Any
Есть еще две интересных функции для работы с массивами. Используя их, можно выполнить проверки значений внутри массива:
``` python
if any(name == 'Андрей' for name in arr):
    print('Success')

if all(name == 'Андрей' for name in arr):
    print('Success')
else:
    print('Nooo...')
```

## Перечисляемые типы данных
Их есть 5 видов:

**list** - типичный динамический массив, полный аналог QList

**tuple** - кортеж. Отличается от list тем, что его элементы и их количество неизменяемы. Часто применяется в функциях, возвращающих несколько значений

**set** - множество. Содержит только уникальные элементы. Не имеет обращения к элементам по индексу.

**dict** - словарь. О нём много сказано, он здесь идентичен словарям в других ЯП

**numpy.ndarray** - мощное средство для работы с многомерными массивами. С ним мы и будем чаще всего вести работу
``` python
# Список легко создать и легко использовать:
numbers = [1, 2, 3, 4, 5]
print(numbers[0])
```
В списках можно обращаться с конца массива используя отрицательные индексы:
``` python
print(numbers[-1])
```
А также делать срез по элементам:
``` python
# Первые 2 элемента
s1 = numbers[:2]
print(s1)

# 3-ий и далее:
s2 = numbers[2:]
print(s2)

# Два последних
s3 = numbers[-2:]
print(s3)

# Со второго по четвертый
s4 = numbers[2:4]
print(s4)

# Все сразу
s5 = numbers[:]
print(s5)
```

Списки передаются по ссылке. Об этом не стоит забывать. Если нужно их скопировать, то используйте срезы.

А еще списки можно поэлементно сравнивать:
``` python
# copy by value
n3 = numbers[:]

# copy by link
n2 = numbers
n2[0] = 10

if (n2==numbers):
  print('equal')
else:
  print('non equal')


if (n2==n3):
  print('equal')
else:
  print('non equal')
```

### Неизменяемая классика для списка:
**append(item)**: добавляет элемент item в конец списка

**insert(index, item)**: добавляет элемент item в список по индексу index

**remove(item)**: удаляет элемент item. Удаляется только первое вхождение элемента. Если элемент не найден, генерирует исключение ValueError

**clear()**: удаление всех элементов из списка

**index(item)**: возвращает индекс элемента item. Если элемент не найден, генерирует исключение ValueError

**pop([index])**: удаляет и возвращает элемент по индексу index. Если индекс не передан, то просто удаляет последний элемент.

**count(item)**: возвращает количество вхождений элемента item в список

**sort([key])**: сортирует элементы. По умолчанию сортирует по возрастанию. Но с помощью параметра key мы можем передать функцию сортировки.

**reverse()**: расставляет все элементы в списке в обратном порядке

![](https://img.shields.io/badge/Задача%205-red)
``` python
# Задание №5. Решето Эратосфена.
# В списке A оставьте только простые числа

A = list(range(1,1000))
# Your code here...
print(A)
```

## Функции
Функции представляют блок кода, который выполняет определенную задачу и который можно повторно использовать в других частях программы. Формальное определение функции:

```
def имя_функции ([параметры]):
    инструкции
```

``` python
def say_hello():
    print("Hello")

say_hello()
```
Функции в Python очень гибкая конструкция, посмотрите внимательно на примеры ниже:
``` python
# Нужно 2 значения вывести? Пожалуйста
def minmax(A):
  return (min(A), max(A))

(min_val, max_val) = minmax(numbers)
print(min_val, max_val)
```

``` python
# Разные типы? Никаких проблем
def maxval(A):
  a = max(A)
  if (a<0):
    return 'Всё плохо...'
  else:
    return a

res = maxval([-10,-30])
print(res)
```

``` python
# Возвращать результат или нет? Решать Вам
def maxval2(A):
  a = max(A)
  if (a>0):
    return a

res = maxval2([-10,-30])
print(res)
```
Не забываем и про зоны видимости. Использовать функцию можно только после её объявления и/или вызова. Если функция была описана и интерпретирована, то она может быть использована.

Переменные, объявленные внутри функции видны только там, переменные снаружи доступны везде
``` python
# Пропустите эту строку кода и выполните следующую
def say():
    stroka = "Hi!"
    print(stroka)
```

``` python
say()
```

``` python
print(stroka)
```

## Исключения
Для обработки исключений в Python имеется блок **try except**.

Для генерации исключений (если пригодится) используется ключевое слово **throw**

``` python
try:
    number1 = int(input("Введите первое число: "))
    number2 = int(input("Введите второе число: "))
    print("Результат деления:", number1/number2)
except ValueError:
    print("Преобразование прошло неудачно")
except ZeroDivisionError:
    print("Попытка деления числа на ноль")
except Exception:
    print("Общее исключение")
print("Завершение программы")
```

``` python
raise Exception("Ну, всё, приплыли...")
```

## Модули
Для того, чтобы присоединить сторонние файлы и библиотеки, в Python есть оператор **import**.
Рассмотрим присоедините и использование встроенных модулей numpy, datetime, random:
``` python
# Подключаем к проекту библиотеку целиком
import random

number = random.random()  # значение от 0.0 до 1.0
print(number)
```

``` python
# Или отдельные её компоненты
from math import pi, cos

print(cos(pi))
```

``` python
from datetime import date

today = date.today()
print(today)
```

``` python
# Подключаем библиотеку Numpy, для удобства изменяя её пространство имён на np
import numpy as np

# Создаём массив 3x2 случайных элементов
X = np.random.rand(3,2)
print(X)
```

![](https://img.shields.io/badge/Задача%206-red)
``` python
# Задание №6. Создайте в текстовом редакторе файл logger.py
# Добавьте в него метод meow(), выводящий на экран текст произвольного содержания.
# Перетащите этот файл в окно "Файлы"
# Запустите следующий код:
import logger as lg
lg.meow()
```

### А если нужно что-то еще?
Установить дополнительные пакеты из сети Интернет можно при помощи утилиты pip.

Для этого в консоли введите команду:
`pip install <имя_модуля>`

## Файлы
В Python есть десятки способов работы с файлами. Рассмотрим наиболее классические из них.
Прежде всего, файл необходимо открыть. В функции open указывается путь к файлу и модификаторы доступа:

**r (Read)**. Файл открывается для чтения. Если файл не найден, то генерируется исключение FileNotFoundError

**w (Write)**. Файл открывается для записи. Если файл отсутствует, то он создается. Если подобный файл уже есть, то он создается заново, и соответственно старые данные в нем стираются.

**a (Append)**. Файл открывается для дозаписи. Если файл отсутствует, то он создается. Если подобный файл уже есть, то данные записываются в его конец.

**b (Binary)**. Используется для работы с бинарными файлами. Применяется вместе с другими режимами - w или r.

``` python
with open("workers.txt", "w") as somefile:
    somefile.write(delimiter.join(arr))
```

``` python
with open("workers.txt", "r") as file:
    content = file.read()
    print(content)
```

### Файлы CSV
Отдельно следует сказать о формате CSV, который часто применяется в задачах DataScienes. Попробуем создать такой файл, и прочитать его. Для этого потребуется библиотека CSV:

``` python
import csv

FILENAME = "users.csv"

users = [
    ["Tom", 28],
    ["Alice", 23],
    ["Bob", 34]
]

# Запись пользователей в CSV
with open(FILENAME, "w", newline="") as file:
    writer = csv.writer(file)
    writer.writerows(users)

# Дозапись еще одного пользователя
with open(FILENAME, "a", newline="") as file:
    user = ["Sam", 31]
    writer = csv.writer(file)
    writer.writerow(user)
```

Чтение файлов осуществляется аналогичным способом:

``` python
with open(FILENAME, "r", newline="") as file:
    reader = csv.reader(file)
    for row in reader:
        print(row[0], " - ", row[1])
```
### Работа с файловой системой
Модуль **os** предоставляет множество функций для работы с операционной системой, причём их поведение, как правило, не зависит от ОС, поэтому программы остаются переносимыми.
``` python
import os

os.mkdir("hello")
os.rmdir("hello")
```

``` python
if os.path.exists("users.csv"):
  os.rename("users.csv", "db.csv")
```
## Массивы Numpy
**Numpy** - это базовый пакет научных вычислений Python, предоставляющий объект многомерного массива и различные производные объекты (такие как маскированные массивы и матрицы) и ряд процедур для быстрых операций с массивами, включая математические, логические, операции с фигурами, сортировку, Выбор, ввод / вывод, дискретное преобразование Фурье, линейная алгебра, основные статистические операции, случайное моделирование и т. д.

**Numpy сочетает в себе эффективность C и простоту Python:**


1.   Так же быстро, как и поэлементная операция C: это режим по умолчанию для numpy, завершаемый предварительно скомпилированным кодом C;
2.   Проще, чем Python: идиоматический синтаксис Numpy более лаконичен, чем встроенный синтаксис Python

Начинается всё с подключения библиотеки:

``` python
import numpy as np
```
#### Заполнение массива
``` python
# Массив нулей:
a = np.zeros(3)
print(a)
```
``` python
# Массив единиц:
b = np.ones([3,3])
print(b)
```
``` python
# Массив случайых чисел:
c = np.random.random([3,3])
print(c)
```
Выполнение поэлементных (+ - * /) операций с массивами:
``` python
print(b + c)
print(b * c)
```
Индексация и срезы работают также, как и List:
``` python
print(a[0])
print(b[0])
print(b[0,0])
print(b[:2,:2])
```
Агрегатные функции могут работать как для массива в целом, так и для строк/столбцов
``` python
print('Максимум в массиве', c.max())
print('Максимум в строках',c.max(axis=1))
print('Максимум в столбцах',c.max(axis=0))
```

![](https://img.shields.io/badge/Задача%207-red)
``` python
# Задание №7. Создайте массив размерностью 10х10 случайных элементов в диапазоне от 10 до 20
# Найдите минимум среди максимальных значений в строках
```

## Самостоятельная работа
**Задача 0.** Внимательно изучить практический материал, выполнить все 7 мини-кейсов.

**Задача 1.** Написать функцию square, принимающую 1 аргумент — сторону квадрата, и возвращающую 3 значения (с помощью кортежа): периметр квадрата, площадь квадрата и диагональ квадрата.

**Задача 2.** Пользователь делает вклад в размере a рублей сроком на years лет под 10% годовых (каждый год размер его вклада увеличивается на 10%. Эти деньги прибавляются к сумме вклада, и на них в следующем году тоже будут проценты). Написать функцию bank, принимающая аргументы a и years, и возвращающую сумму, которая будет на счету пользователя.

## Контрольные вопросы
1. Язык программирования Python
2. Типы данных. Контейнерные типы
3. Установка и подключение библиотек
4. Условный оператор и его синтаксис
5. Операторы цикла и их синтаксис
6. Назначение и возможности библиотеки Numpy

