# Работа №3
### Визуализация данных

В данной работе рассматриваются способы визуализации данных в языке Python, с использованием библиотек matplotlib и seaborn
### Сведения о работе

Необходимые библиотеки: `seaborn, matplotlib`

Количество заданий для самостоятельного выполнения: ![](https://img.shields.io/badge/1%20задание-red)

Время на выполнение: ![](https://img.shields.io/badge/90-минут-blue)

### Введение
Для задач машинного обучения важной составляющей является визуализация как исходных данных, так и метрик, полученных в процессе обучения модели. Графики позволяют наглядно оценить показатели, а также предоставить заказчику подробные и красивые отчёты по процессу подготовки моделей.

Для визуализации существуют десятки различных библиотек. Мы разберемся с самыми известными из них: ```matplotlib, seaborn```.

Для работы установите их при помощи команды:

```pip install seaborn```

## Наборы данных для визуализации

Рассмотрим уже знакомые наборы ```iris.csv``` и ```titanic.csv```.

Загрузим их через Pandas и попробуем на их основе построить различные выборки

``` python 
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# Установка стиля графиков
sns.set(style="whitegrid")
```

``` python
iris_data = pd.read_csv("iris.csv")
titanic_data = pd.read_csv('titanic.csv')
```

## Примеры простейших диаграмм

Рассмотрим на одном наборе данных стобчатые и круговые диаграммы. За основу возьмём данные Росмониторинга области за 2023 год

``` python
labels = ["Математические и естественные науки", "Технические науки", "Здравоохранение", "Сельское хозяйство", "Науки об обществе", "Педагогические науки", "Гуманитарные науки", "Искусство и культура"]
vals = [749, 5187, 5717, 1515, 3008, 2323,336 ,76]
```

``` python
# Создаем диаграмму виде Pie, указываем данные и названия
plt.pie(vals, labels=labels)
# Добавляем заголовок (опционально)
plt.title("Распределение студентов по направлениям (Рязанская область)")
# Выводим на экран
plt.show()
```

``` python
plt.barh(labels, vals, label='Численность')
# Можно указывать подписи осей
plt.xlabel('Численность')
plt.ylabel('Направление')
plt.title('Распределение студентов по направлениям (Рязанская область)')
# При необходимости, можно вывести легенду
plt.legend()
plt.show()
```

## Построение диаграмм на основе нескольких величин
В задачах анализа на первое место встают ситуации, когда необходимо получить зависимость одной величины от другой (или даже от нескольких). Подходов к визуализации тут достаточно много, поскольку для каждого отдельного случая нужны свои графики. Постараемся рассмотреть самые популярные


> *Не надо слов, не надо паники...*
>
> *... это датасет о Титанике!*



``` python
# 1. Гистограмма распределения возраста пассажиров
# Можно указать размер области построения
plt.figure(figsize=(10, 6))
# Можно визуализировать данные через sns, для поддержки его стилей
sns.histplot(titanic_data['Age'].dropna(), bins=30, kde=True)
plt.title('Распределение возраста пассажиров')
plt.xlabel('Возраст')
plt.ylabel('Количество пассажиров')
plt.show()
```

``` python
# 2. Ящик с усами для возраста по классам
plt.figure(figsize=(10, 6))
sns.boxplot(x='Pclass', y='Age', data=titanic_data)
plt.title('Возраст пассажиров по классам')
plt.xlabel('Класс')
plt.ylabel('Возраст')
plt.show()
```

``` python
# 3. Сравнение выживаемости по полу
plt.figure(figsize=(10, 6))
sns.countplot(x='Survived', hue='Sex', data=titanic_data)
plt.title('Выживаемость по полу')
plt.xlabel('Выживание (0 = Нет, 1 = Да)')
plt.ylabel('Количество пассажиров')
plt.legend(title='Пол')
plt.show()
```

``` python
# 4. Сравнение выживаемости по классу и полу
plt.figure(figsize=(10, 6))
sns.catplot(x='Pclass', hue='Survived', col='Sex', data=titanic_data, kind='count', height=5, aspect=0.7)
plt.subplots_adjust(top=0.8)
plt.suptitle('Выживаемость по классу и полу')
plt.show()
```

``` python
# 5. Сравнение выживаемости по классу и полу
g = sns.FacetGrid(titanic_data, col='Survived', row='Pclass', margin_titles=True)
g.map(sns.histplot, 'Age', bins=30, kde=True)
g.fig.subplots_adjust(top=0.9)
g.fig.suptitle('Распределение возраста по выживаемости и классам')
plt.show()
```

``` python
# 6. Линейная регрессия между возрастом и тарифо
plt.figure(figsize=(10, 6))
sns.regplot(x='Age', y='Fare', data=titanic_data, scatter_kws={'alpha':0.5})
plt.title('Линейная регрессия между возрастом и тарифом')
plt.xlabel('Возраст')
plt.ylabel('Тариф')
plt.show()
```

``` python
# 7. Плотность распределения тарифов по выживаемости
plt.figure(figsize=(10, 6))
sns.kdeplot(data=titanic_data, x='Fare', hue='Survived', fill=True)
plt.title('Плотность распределения тарифов по выживаемости')
plt.xlabel('Тариф')
plt.ylabel('Плотность')
plt.show()
```

``` python
# 8. Парные графики для трёх параметров
plt.figure(figsize=(10, 8))
sns.pairplot(titanic_data, hue='Survived', vars=['Age', 'Fare', 'Pclass'])
plt.show()
```


``` python
# 9. Сравнение длины и ширины чашелистика
plt.figure(figsize=(10, 6))
sns.scatterplot(x='sepal_length', y='sepal_width', hue='species', data=iris_data, palette='Set1')
plt.title('Сравнение длины и ширины чашелистика')
plt.xlabel('Длина чашелистика (см)')
plt.ylabel('Ширина чашелистика (см)')
plt.legend(title='Вид')
plt.show()
```

``` python
# 10. И еще раз о парных гарфиках
sns.pairplot(iris_data[['sepal_length','sepal_width','petal_length','petal_width','species']], hue = 'species', palette='Set1')
```


## Самостоятельная работа
**Задача 0.** Внимательно изучите практический материал, выполнить все 10 мини-кейсов.

**Задача 1.** Разработайте 4-5 примеров для визуализации данных из набора tourism. Постарайтесь выбрать диаграммы таким образом, чтобы максимально показать явные зависимости между столбцами

## Контрольные вопросы
1. Какие средства языка Python используются для визуализации данных?
2. Какие виды диаграмм вы знаете?
3. Приведите пример задач, для которых могут быть полезны диаграммы вида "Ящик с усами"?
4. Приведите пример задач, для которых могут быть полезны парные диаграммы?