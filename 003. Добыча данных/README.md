# Работа №3
## Работа с сырыми данными
В данной работе предлагается исследовать набор данных о погоде с сайта https://rp5.ru. Данные достаточно разнообразны, содержат пропуски, строки в числовых значениях, содержат дни, в которые не фиксировались измерения. В данной работе Вам будет предложено продемонстрировать все полученные навыки работы с Python/Pandas/Seaborn.

## Загрузка данных
Данные можно получить с первоисточника http://rp5.ru/archive.php?wmo_id=27730&lang=ru, либо с git: https://github.com/vb2005/keras-quickstart/raw/main/Datasets/weather.7z

``` python
import pandas as pd
import numpy as np
import seaborn as sns
df = pd.read_csv("weather.csv", encoding='utf-8', delimiter=';')
```

Посмотрим на сами данные
``` python
df.head(10)
```

и на столбцы
``` python
df.info()
```

## Работа с датой и переименование столбцов
В наборе присутсвует дата как строка, много цифровых значений, представленных в виде строки и очень много незаполненных значений. Всё это надо чистить. Начнём с преобразования столбца со временем
``` python
# Вначале переименуем его для удобства работы в time
df = df.rename(columns = {'Местное время в Рязани':'time'})

# Теперь выполним конвертацию по шаблону
df['time'] = pd.to_datetime(df['time'], format='%d.%m.%Y %H:%M')
df
```

Также можно воспользоваться группировкой по дням, месяцам, годам
``` python
df.groupby(pd.Grouper(key="time", freq="D")).mean()
```

## Конвертация данных и удаление пропусков
Столбец N - цифровая информация об облачности, прдстваленная строкой. Давайте переведем столбец в число. Прежде всего, посомтрите, какие данные в нём присутствуют
``` python
df['N'].unique().tolist()
```

Замените столбец на новый, в котором облачость представлена числом с плавающей точкой. Строки с nan и неопределённостью удалите из выборки
``` python
def set_clounds(value):
    if value == 'Облаков нет.':
        return 0
    if value == '10%  или менее, но не 0':
        return 5
    elif value == '20–30%.':
        return 15
    elif value == '40%.':
        return 40
    elif value == '50%.':
        return 50
    elif value == '60%.':
        return 60
    elif value == '70 – 80%.':
        return 65
    elif value == '90  или более, но не 100%':
        return 95
    elif value == '100%.':
        return 100
    else:
      return np.nan

df['clouds'] = df['N'].map(set_clounds)
df = df.dropna(subset=['clouds'])
df = df.drop(['N'], axis=1)
df.info()
```

## Задание №1
![](https://img.shields.io/badge/Задача%201-red)
``` python
# Обратите внимание на столбцы
# T - temperature
# P - pressure
# U - humidity
# Ff - wind speed
# Они почти всегда заполнены. Есть несколько строк с nan-значениями. Их необходимо удалить

# Также есть некоторые столбцы, которые дублируют информацию, представляя её в иной форме.
# Это столбцы Po, Pa, ff10, ff3, Tn, Tx, W1, W2, Nh. Их необхоидмо удалить
# А еще один столбец без имени появился из-за некорректной разметки. Его также необъодимо удалить
```

## Задание №2
![](https://img.shields.io/badge/Задача%202-red)
``` python
# Определите, какой тип облачности чаще всего был в нашем городе:
```

## Задание №3
![](https://img.shields.io/badge/Задача%203-red)
``` python
# Столбец WW - свдения об осадках. Найдите записи, включающие в своем названии "туман".
```

## Задание №4
![](https://img.shields.io/badge/Задача%204-red)
``` python
# Выведите график распределения температрур. Определите, какая температура была чаще всего
```

## Задание №5
![](https://img.shields.io/badge/Задача%205-red)
``` python
# Определите самый теплый и самый холодный месяцы в году
```

## Задание №6
![](https://img.shields.io/badge/Задача%206-red)
``` python
# Выведите график зависимости давления от температуры
```

## Задание №7
![](https://img.shields.io/badge/Задача%207-red)
``` python
# Найдите месяц в  котором фиксировалось наибольшее количество замеров с сильным ветром (Ff > 6 м/с)
```

## Задание №8
![](https://img.shields.io/badge/Задача%208-red)
``` python
# Разработайте фрагмент кода, который построит розу ветров для выбранного кода
# Данный фрагмент кода поможет в работе https://gist.github.com/phobson/41b41bdd157a2bcf6e14
```

## Задание №9
![](https://img.shields.io/badge/Задача%209-red)
``` python
# Найдите самый снежный день (снежный покров увеличился на максимальное значение)
```

## Задание №10
![](https://img.shields.io/badge/Задача%2010-red)
``` python
# Выполните группировку данных по дням, добавьте новый столбец "Изменение температуры" и запишите в него разницу значений (сегодня - завтра)
# Постройте график зависимости разницы температуры от давления, от влажности, от скорости ветра
# Проанализируйте, что в наибольшей степени влияет на температуру на следующий день
```

## Задание №11
![](https://img.shields.io/badge/Задача%2011-red)
``` python
# Найдите, сколько раз фиксировался снежный покров в сентябре и в мае
```

## Задание №12
![](https://img.shields.io/badge/Задача%2012-red)
``` python
# Определите величину среднего снежного покрова в январе по всем годам
```

Метеостанция Рязань, Россия, WMO_ID=27730, выборка с 01.03.2005 по 13.03.2024, все дни

Кодировка: Unicode

Информация предоставлена сайтом "Расписание Погоды", rp5.ru

Пожалуйста, при использовании данных, любезно указывайте названный сайт.

Обозначения метеопараметров см. по адресу http://rp5.ru/archive.php?wmo_id=27730&lang=ru
